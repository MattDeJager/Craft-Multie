{% extends "multie/_layouts/index.twig" %}

{% set crumbs = [
    { label: 'Multie'|t('plugin-handle'), url: url('multie') },
    { label: 'Fields'|t('plugin-handle'), url: url('multie') },
] %}

{% set showHeader = true %}
{% set fullPageForm = true %}
{% set selectedSubnavItem = 'fields' %}
{% set sites = craft.app.getSites().getAllSites() %}
{% set title = "Multie Site Manager" %}

{% set formActions = [
    {
        label: 'Save and continue editing'|t('app'),
        redirect: 'settings/fields/edit/{id}'|hash,
        shortcut: true,
        retainScroll: true,
    },
    {
        label: 'Save and add another'|t('app'),
        shortcut: true,
        shift: true,
        params: {addAnother: 1},
    },
    fieldId ?? false ? {
        label: 'Delete'|t('app'),
        action: 'fields/delete-field',
        redirect: 'settings/fields'|hash,
        destructive: true,
        confirm: 'Are you sure you want to delete “{name}”?'|t('app', {
            name: field.name,
        }),
    },
]|filter %}



{% block actionButton %}


{% endblock %}

{% block sidebar %}
    <ul>
        <li><a href="#">Simple fields</a></li>
        <li><a href="#">Base Relation Fields</a></li>
        <li><a href="#">Matrix Fields</a></li>
    </ul>
{% endblock %}

{% block content %}
    {{ actionInput('fields/save-field') }}
    {{ redirectInput('settings/fields/{groupId}') }}
    {% if craft.app.getIsMultiSite() %}
        {% set translationMethods = field.supportedTranslationMethods %}
        {% if translationMethods|length > 1 %}
            <div id="translation-settings">
                {{ forms.selectField({
                    label: "Translation Method"|t('app'),
                    instructions: "How should this field’s values be translated?"|t('app'),
                    id: 'translation-method',
                    name: 'translationMethod',
                    options: [
                        'none' in translationMethods ? { value: 'none', label: "Not translatable"|t('app') },
                        'site' in translationMethods ? { value: 'site', label: "Translate for each site"|t('app') },
                        'siteGroup' in translationMethods ? { value: 'siteGroup', label: "Translate for each site group"|t('app') },
                        'language' in translationMethods ? { value: 'language', label: "Translate for each language"|t('app') },
                        'custom' in translationMethods ? { value: 'custom', label: "Custom…"|t('app') }
                    ]|filter,
                    value: field.translationMethod,
                    toggle: true,
                    targetPrefix: 'translation-method-'
                }) }}

                {% if 'custom' in translationMethods %}
                    {% tag 'div' with {
                        id: 'translation-method-custom',
                        class: field.translationMethod != 'custom' ? 'hidden' : null,
                    } %}
                        {{ forms.textField({
                            label: "Translation Key Format"|t('app'),
                            instructions: "Template that defines the field’s custom “translation key” format. Field values will be copied to all sites that produce the same key. For example, to make the field translatable based on the first two characters of the site handle, you could enter `{site.handle[:2]}`.",
                            id: 'translation-key-format',
                            class: 'code',
                            name: 'translationKeyFormat',
                            value: field.translationKeyFormat,
                            errors: field.getErrors('translationKeyFormat')
                        }) }}
                    {% endtag %}
                {% endif %}
            </div>
        {% endif %}
    {% endif %}
{% endblock %}



